#!/usr/bin/env ruby

require 'optparse'
require 'methadone'
require 'pave.rb'

class App
  include Methadone::Main
  include Methadone::CLILogging

  main do |command, opt| # Add args you want: |like,so|
    # your program code here
    # You can access CLI options via
    # the options Hash
    info "pave - Command line tools for Concrete5."
    info "By Jamon Holmgren"

    case command.to_sym
    when :new then Pave::Concrete.create(opt)
    else show_help
    end

    0 # Good!
  end

  def self.show_help
    info "Invalid."
  end

  def self.create(name)
    info "Creating #{name}..."
    sleep 2
    info "Done."
  end

  # supplemental methods here

  # Declare command-line interface here

  description "Command line for Concrete5 websites."
  #
  # Accept flags via:
  # on("--flag VAL","Some flag")
  # options[flag] will contain VAL
  #
  # Specify switches via:
  # on("--[no-]switch","Some switch")
  #
  # Or, just call OptionParser methods on opts
  #
  # Require an argument
  arg :command
  #
  # # Make an argument optional
  arg :opt, :optional

  version Pave::VERSION

  use_log_level_option

  go!
end
